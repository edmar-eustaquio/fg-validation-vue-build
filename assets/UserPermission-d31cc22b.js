import{r as x,b as p,d as N,e as w,o as _,i as C,g as t,w as l,u as a,F as k,a as r,t as E,f as i,j as R,c as T}from"./app-2f9d10f9.js";import{_ as L,a as z,E as f,M as U,k as V}from"./AuthenticatedLayout-e9870fba.js";import{E as $}from"./index-b2bd8d2c.js";import{E as j,a as g}from"./index-77e36d3c.js";import{E as A}from"./index-00a3f3ca.js";import{E as O,a as W}from"./index-2299c81e.js";import{E as D}from"./index-a89ca195.js";import"./index-345c38df.js";import"./validator-fab8e9c6.js";import"./index-5d88026c.js";const F=i("h2",{class:"px-5 pt-4 font-semibold text-xl text-gray-800 leading-tight"}," Users Role ",-1),I={class:"flex justify-end pt-2"},q=i("label",{for:""},[r("Role "),i("span",{class:"text-red-600"},"*")],-1),G={class:"flex justify-end"},le={__name:"UserPermission",props:["roles"],setup(S){const c=x({}),v=p(document.documentElement.clientWidth),d=p(!1),m=p(null),h=p(null),n=x({order_by:null,order_at:null,page_size:10,page:1}),b=p(0);N(()=>{u()});function B(s){s.order?(n.order_by=s.order=="ascending"?"asc":"desc",n.order_at=s.column.label):(n.order_by=null,n.order_at=null),u()}const u=()=>{w.get(route("user.with-permissions",n)).then(s=>{const o=s.data.data;c.value=o.data,b.value=o.total})},y=s=>{m.value=s.roles[0].name,h.value=s.id,d.value=!0};window.addEventListener("resize",()=>{v.value=document.documentElement.clientWidth});const M=async()=>{await w.post(route("user.update-permissions",h.value),{role:m.value}).then(s=>{V({type:"success",message:"Updated successfully"}),d.value=!1,u()}).catch(s=>{V({type:"warning",message:"Error saving update!!!"})})};return(s,o)=>(_(),C(k,null,[t(L,null,{default:l(()=>[F,t(a($),{class:"m-5 mt-1",shadow:"always"},{default:l(()=>[t(a(j),{data:(c==null?void 0:c.value)??[],"row-key":"id",onSortChange:B,"header-row-class-name":"thead-light"},{default:l(()=>[t(a(g),{"min-width":"220px",label:"NAME",sortable:""},{default:l(({row:e})=>[r(E(e.name),1)]),_:1}),t(a(g),{"min-width":"130px",label:"EMAIL",sortable:""},{default:l(({row:e})=>[r(E(e.email),1)]),_:1}),t(a(g),{"min-width":"130px",label:"ROLE",sortable:""},{default:l(({row:e})=>[r(E(e.roles.length>0?e.roles[0].name:""),1)]),_:1}),t(a(g),{width:"157px",label:"ACTION",fixed:"right"},{default:l(({row:e})=>[t(a(z),{class:"box-item",effect:"dark",content:"Edit",placement:"top"},{default:l(()=>[t(a(f),{type:"primary",size:"small",icon:a(U),onClick:P=>y(e)},null,8,["icon","onClick"])]),_:2},1024),t(a(z),{class:"box-item",effect:"dark",content:"Edit",placement:"top"},{default:l(()=>[t(a(f),{type:"primary",size:"small",icon:a(U),onClick:P=>y(e)},null,8,["icon","onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data"]),i("div",I,[t(a(A),{currentPage:n.page,"onUpdate:currentPage":o[0]||(o[0]=e=>n.page=e),"page-size":n.page_size,"onUpdate:pageSize":o[1]||(o[1]=e=>n.page_size=e),"page-sizes":[5,10,50,100],background:"",layout:"total, sizes, prev, pager, next",total:b.value,onSizeChange:u,onCurrentChange:u},null,8,["currentPage","page-size","total"])])]),_:1})]),_:1}),t(a(D),{width:v.value>700?"50%":"70%",modelValue:d.value,"onUpdate:modelValue":o[4]||(o[4]=e=>d.value=e),title:"Update User Role","close-on-click-modal":!1},{footer:l(()=>[i("span",G,[t(a(f),{type:"warning",onClick:o[3]||(o[3]=e=>d.value=!1),plain:""},{default:l(()=>[r("Cancel")]),_:1}),t(a(f),{type:"primary",onClick:M},{default:l(()=>[r("Update")]),_:1})])]),default:l(()=>[i("div",null,[q,t(a(O),{modelValue:m.value,"onUpdate:modelValue":o[2]||(o[2]=e=>m.value=e),filterable:"",placeholder:"Select Role",style:{width:"100%"}},{default:l(()=>[(_(!0),C(k,null,R(S.roles,e=>(_(),T(a(W),{label:e.name,value:e.name},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])])]),_:1},8,["width","modelValue"])],64))}};export{le as default};
