import{o as u,c as y,w as o,u as l,a as c,t as m,r as C,b as T,d as A,e as z,f as h,g as n,h as I,i as g,j as b,F as w}from"./app-bc212b95.js";import{E as _,a as D,_ as B,d as F,c as L,b as M}from"./AuthenticatedLayout-50ff9968.js";import{E as N}from"./index-454779f0.js";import{E,a as v}from"./index-68edb8cc.js";import{E as R}from"./index-d27dcb02.js";import{E as $,a as p}from"./index-85e0eb70.js";import{E as P}from"./index-6a69cc2c.js";import{E as O}from"./index-32a7580d.js";import"./validator-fd88d94b.js";const V={__name:"ResponsiveButton",props:["title","icon","type","plain","windowWidth"],setup(r){return(d,t)=>(u(),y(l(D),{class:"box-item",effect:"dark",content:r.title,placement:"top"},{default:o(()=>[r.windowWidth>420?(u(),y(l(_),{key:0,type:r.type,onClick:t[0]||(t[0]=f=>d.$emit("onClick")),icon:r.icon,plain:!!r.plain},{default:o(()=>[c(m(r.title??""),1)]),_:1},8,["type","icon","plain"])):(u(),y(l(_),{key:1,type:r.type,size:"small",onClick:t[1]||(t[1]=f=>d.$emit("onClick")),icon:r.icon,plain:!!r.plain},null,8,["type","icon","plain"]))]),_:1},8,["content"]))}},j={class:"px-5 pt-4 flex justify-between"},W=h("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Activity Log ",-1),H={class:"pt-3 px-5 flex justify-between gap-2"},K=["innerHTML"],G={class:"flex justify-end pt-2"},le={__name:"ActivityLog",setup(r){const d=C({}),t=C({order_by:null,order_at:null,page_size:10,page:1}),f=T(0);A(()=>{i()});function k(s){const a=s.split("|");return a.length!=2?"":'<span style="color:#008080; font-weight:600"><i>'+a[0]+"</i></span> => "+a[1]}function S(s){s.order?(t.order_by=s.order=="ascending"?"asc":"desc",t.order_at=s.column.label):(t.order_by=null,t.order_at=null),i()}const i=()=>{z.get(route("activity-log.show",t)).then(s=>{const a=s.data.data;d.value=a.data,f.value=a.total})},x=s=>{if(d.value.length<1){ElMessage({type:"warning",message:"No data to export."});return}window.location.href=route("export.activity-log",{export_type:s,search:t.search,action:t.action,module:t.module,_date:t._date,order_by:t.order_by,order_at:t.order_at})};return(s,a)=>(u(),y(B,null,{default:o(()=>[h("div",j,[W,n(l(M),{class:"pl-2"},{default:o(()=>[n(V,{title:"Excel",type:"success",icon:l(F),onOnClick:a[0]||(a[0]=e=>x("excel")),windowWidth:701},null,8,["icon"]),n(V,{title:"CSV",type:"info",icon:l(L),onOnClick:x,windowWidth:701},null,8,["icon"])]),_:1})]),h("div",H,[n(l(N),{modelValue:t.search,"onUpdate:modelValue":a[1]||(a[1]=e=>t.search=e),placeholder:"Search here.",onKeyup:I(i,["enter"]),onClear:i,type:"text",clearable:""},null,8,["modelValue","onKeyup"]),n(l(E),{modelValue:t.action,"onUpdate:modelValue":a[2]||(a[2]=e=>t.action=e),onChange:i,onClear:i,placeholder:"Select action here.",filterable:"",clearable:"",style:{"min-width":"160px"}},{default:o(()=>[(u(),g(w,null,b(["Created","Updated","Deleted","Created on Import","Updated on Import","DR Number Assigning","DR Number Unassigning","Assign RFID","Scanned","Confirm","Hold","Role Updated"],e=>n(l(v),{key:e,label:e,value:e},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),n(l(E),{modelValue:t.module,"onUpdate:modelValue":a[3]||(a[3]=e=>t.module=e),onChange:i,onClear:i,placeholder:"Select module here.",filterable:"",clearable:"",style:{"min-width":"160px"}},{default:o(()=>[(u(),g(w,null,b(["Item","Assign Truck","First Validation","Final Validation - Mobile","Final Validation - PC","FG Inventory","Confirmation","RFID Assigning","Truck","User","Role Management"],e=>n(l(v),{key:e,label:e,value:e},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),n(l(R),{modelValue:t._date,"onUpdate:modelValue":a[4]||(a[4]=e=>t._date=e),type:"date",placeholder:"Select date here.",clearable:"",onChange:i,onClear:i,style:{"max-width":"200px","min-width":"150px"}},null,8,["modelValue"])]),n(l(O),{class:"m-5 mt-1",shadow:"always"},{default:o(()=>[n(l($),{data:(d==null?void 0:d.value)??[],"row-key":"id",onSortChange:S,"header-row-class-name":"thead-light"},{default:o(()=>[n(l(p),{"min-width":"110px",label:"USER NAME"},{default:o(({row:e})=>[c(m(e.user.name),1)]),_:1}),n(l(p),{"min-width":"110px",label:"ACTION",sortable:""},{default:o(({row:e})=>[c(m(e.action),1)]),_:1}),n(l(p),{"min-width":"120px",label:"MODULE",sortable:""},{default:o(({row:e})=>[c(m(e.module),1)]),_:1}),n(l(p),{"min-width":"300px",label:"ACTIVITY",sortable:""},{default:o(({row:e})=>[(u(!0),g(w,null,b(e.activity.split("^"),U=>(u(),g("div",{innerHTML:k(U)},null,8,K))),256))]),_:1}),n(l(p),{"min-width":"140px",label:"DATE",sortable:""},{default:o(({row:e})=>[c(m(e.date),1)]),_:1})]),_:1},8,["data"]),h("div",G,[n(l(P),{currentPage:t.page,"onUpdate:currentPage":a[5]||(a[5]=e=>t.page=e),"page-size":t.page_size,"onUpdate:pageSize":a[6]||(a[6]=e=>t.page_size=e),"page-sizes":[5,10,50,100],background:"",layout:"total, sizes, prev, pager, next",total:f.value,onSizeChange:i,onCurrentChange:i},null,8,["currentPage","page-size","total"])])]),_:1})]),_:1}))}};export{le as default};
